global:
  scrape_interval: 15s          # Default scrape interval
  evaluation_interval: 15s      # How frequently to evaluate rules
  external_labels:
    monitor: 'jetson-monitoring'

# Load rules once and periodically evaluate them
rule_files:
  - 'alert_rules.yml'

# Alert configuration
alerting:
  alertmanagers:
    - static_configs:
        - targets: ['alertmanager:9093']

# Scrape configurations
scrape_configs:
  # ===== PUSHGATEWAY =====
  # This is where Jetson devices push their metrics via HTTP POST
  # Prometheus pulls from here every scrape_interval
  - job_name: 'pushgateway'
    static_configs:
      - targets: ['localhost:9091']
        labels:
          service: 'metrics-collection'

  # ===== PROMETHEUS SELF-MONITORING =====
  # Monitor Prometheus itself
  - job_name: 'prometheus'
    static_configs:
      - targets: ['localhost:9090']
        labels:
          service: 'prometheus'

# Optional: Node exporter (if running on monitoring VM for host metrics)
# Uncomment if you want to monitor the monitoring VM itself
# - job_name: 'node_exporter'
#   static_configs:
#     - targets: ['localhost:9100']
#       labels:
#         service: 'node-exporter'
 