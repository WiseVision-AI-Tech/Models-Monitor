groups:
  - name: jetson_alerts
    interval: 10s
    rules:

      - alert: HighTemperature
        expr: jetson_cpu_temp_c > 80
        for: 2m
        labels:
          severity: critical
          alert_type: temperature
        annotations:
          summary: "High CPU Temperature on {{ $labels.instance }}"
          description: "CPU temperature is {{ $value }}°C"

      - alert: HighGPUUsage
        expr: jetson_gpu_load_percent > 95
        for: 1m
        labels:
          severity: critical
          alert_type: gpu
        annotations:
          summary: "High GPU Usage on {{ $labels.instance }}"
          description: "GPU usage is {{ $value }}%"

      - alert: HighRAMUsage
        expr: jetson_ram_used_mb > 13312
        for: 1m
        labels:
          severity: critical
          alert_type: ram
        annotations:
          summary: "High RAM Usage on {{ $labels.instance }}"
          description: "RAM usage is {{ $value }} MB"

      - alert: CPUCoreImbalance
        expr: |
          jetson_cpu_core0_percent > 95
          or jetson_cpu_core1_percent > 95
          or jetson_cpu_core2_percent > 95
          or jetson_cpu_core3_percent > 95
        for: 1m
        labels:
          severity: critical
          alert_type: cpu
        annotations:
          summary: "CPU Core Imbalance on {{ $labels.instance }}"
          description: "One or more CPU cores above threshold"

      - alert: HighCPUTemperature
        expr: jetson_cpu_temp_c > 80
        for: 2m
        labels:
          severity: critical
          alert_type: temperature
        annotations:
          summary: "High CPU Temperature on {{ $labels.instance }}"
          description: "CPU temperature is {{ $value }}°C"
