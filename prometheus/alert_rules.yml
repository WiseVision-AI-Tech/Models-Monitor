groups:
  - name: jetson_alerts
    interval: 10s
    rules:
      - alert: HighCPUTemperature
        expr: jetson_cpu_temp_c > 80
        for: 30s
        labels:
          severity: critical
        annotations:
          summary: "High CPU Temperature on {{ $labels.instance }}"
          description: "CPU temperature is {{ $value }}Â°C"

      - alert: HighGPUload
        expr: jetson_gpu_load_percent > 90
        for: 30s
        labels:
          severity: warning
        annotations:
          summary: "High GPU Load on {{ $labels.instance }}"
          description: "GPU load is {{ $value }}%"

      - alert: LowAvailableRAM
        expr: (jetson_ram_total_mb - jetson_ram_used_mb) < 800
        for: 30s
        labels:
          severity: critical
        annotations:
          summary: "Low Available RAM on {{ $labels.instance }}"
          description: "Available RAM is only {{ $value }} MB"

      - alert: HighCPUCoreUsage
        expr: jetson_cpu_core0_percent > 90 or jetson_cpu_core1_percent > 90 or jetson_cpu_core2_percent > 90 or jetson_cpu_core3_percent > 90
        for: 30s
        labels:
          severity: warning
        annotations:
          summary: "High CPU Core Usage on {{ $labels.instance }}"
          description: "One of the CPU cores usage is above 90% (value: {{ $value }}%)"

      - alert: GPUIdle
        expr: jetson_gpu_load_percent < 5
        for: 1m
        labels:
          severity: info
        annotations:
          summary: "GPU Idle on {{ $labels.instance }}"
          description: "GPU load is {{ $value }}%"
